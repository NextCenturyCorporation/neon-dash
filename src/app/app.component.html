<mat-sidenav-container class="neon-sidenav" [ngClass]="widgetService.getTheme()">
    <mat-sidenav #sideNavRight class="neon-sidenav neon-sidenav-info" mat-fill position="end">
        <div>
            <mat-toolbar class="title" color="primary">
                <span>{{ rightPanelTitle }}</span>
            </mat-toolbar>

            <div class="right-panel-container">
                <div id="aboutNeon" class="about-neon-container" *ngIf="createAboutNeon">
                    <app-about-neon [dashboardVersion]="dashboardVersion"></app-about-neon>
                </div>
                <div id="addVis" class="add-visualization-container" *ngIf="createAddVis">
                    <app-add-visualization></app-add-visualization>
                </div>
                <div id="gear" class="gear-container" *ngIf="createGear">
                    <app-gear [sideNavRight]="sideNavRight"></app-gear>
                </div>
                <div id="savedState" class="saved-state-container" *ngIf="createSavedState">
                    <app-save-state [sidenav]="sideNavRight" [widgetGridItems]="widgetGridItems" [widgets]="widgets"></app-save-state>
                </div>
                <div id="settings" class="setting-container" *ngIf="createSettings">
                    <app-settings [widgets]="widgets"></app-settings>
                </div>
            </div>
        </div>
    </mat-sidenav>

    <mat-toolbar class="neon-toolbar-large neon-toolbar-wide titlebar-header-text" color="primary" layout-align="space-between center" flex>
        <span>{{ datasetService.getCurrentDashboardTitle() || "Choose Dashboard..." }}</span>
        <span class="fill-remaining"></span>
        <button mat-icon-button class="neon-icon-button-large" aria-label="Add Visualization" tooltip-position="below" id="showVisShortcutButton"
            matTooltip="Add a New Visualization" (click)="setPanel('addVis', 'Visualization'); sideNavRight.toggle()" *ngIf="showVisShortcut">
            <mat-icon class="neon-icon-large">add_circle</mat-icon>
        </button>
        <button mat-icon-button class="neon-icon-button-large" aria-label="Connect to a Custom Data Source"
            matTooltipPosition="below" matTooltip="Connect to a Custom Data Source" (click)="openCustomConnectionDialog()"
            *ngIf="showCustomConnectionButton">
            <mat-icon class="neon-icon-large">storage</mat-icon>
        </button>
        <div class="simple-search-container">
            <app-simple-filter #simpleFilter></app-simple-filter>
        </div>
        <button mat-icon-button class="neon-icon-button-large" aria-label="Show Dashboard Selector" matTooltipPosition="below"
            matTooltip="Show Dashboard Selector" (click)="toggleDashboardSelectorDialog(!showDashboardSelector)">
            <mat-icon class="neon-icon-large" svgIcon="dashboard_selector"></mat-icon>
        </button>
        <button mat-icon-button class="neon-icon-button-large" aria-label="Show Filters" matTooltipPosition="below" id="showFiltersComponentIcon"
            matTooltip="Show Filters" (click)="toggleFiltersDialog()" *ngIf="showFiltersComponentIcon">
            <mat-icon class="neon-icon-large" *ngIf="changeFiltersComponentIcon()" svgIcon="{{filtersIcon}}"></mat-icon>
        </button>

        <mat-menu #appMenu="matMenu" [backdropClass]="widgetService.getTheme()" yPosition="below" [overlapTrigger]="false">
            <button mat-menu-item (click)="setPanel('addVis', 'Visualization'); sideNavRight.toggle()">
                <mat-icon color="secondary">add_circle</mat-icon>Visualizations</button>
            <button mat-menu-item (click)="setPanel('savedState', 'Save States'); sideNavRight.toggle()">
                <mat-icon color="secondary">save</mat-icon>Saved States</button>
            <button mat-menu-item (click)="setPanel('settings', 'Settings'); sideNavRight.toggle()">
                <mat-icon color="secondary">settings</mat-icon>Settings
            </button>
            <button mat-menu-item (click)="setPanel('aboutNeon', 'About Neon'); sideNavRight.toggle()">
                <mat-icon color="secondary">info</mat-icon>About
            </button>
        </mat-menu>

        <button mat-icon-button class="neon-icon-button-large" [matMenuTriggerFor]="appMenu">
            <mat-icon class="neon-icon-large">menu</mat-icon>
        </button>
    </mat-toolbar>

    <div class="header-toggle-container">
        <div class="filters-container" id="filters" *ngIf="createFiltersComponent">
            <app-filters (closeDialog)="toggleFiltersDialog()"></app-filters>
            <div class="header-toggle-footer">
            </div>
        </div>
    </div>

    <div class="header-toggle-container">
        <div class="dashboard-selector-container" id="dashboard.selector">
            <app-dashboard-selector [dashboards]="dashboards"></app-dashboard-selector>
            <div class="header-toggle-footer"></div>
        </div>
    </div>

    <div class="neon-dash" mat-fill layout="col">
        <div [ngGrid]="gridConfig" #grid>
            <div *ngFor="let widgetGridItem of widgetGridItems; let i = index;" [(ngGridItem)]="widgetGridItem.config"
                    name="widgetGridItem.id" id="widgetGridItem.id" (onResizeStart)="onResizeStart(i, $event)"
                    (onResizeStop)="onResizeStop(i, $event)" (onDragStop)="onDragStop(i, $event)">
                <app-visualization-container [visualization]="widgetGridItem"></app-visualization-container>
                <ng-content></ng-content>
            </div>
        </div>
    </div>
</mat-sidenav-container>
