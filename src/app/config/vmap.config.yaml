datasets:
  -
    name: NIST
    datastore: elasticsearchrest
    hostname: 10.107.5.227
    layout: NIST
    databases:
      -
        name: nist_data
        prettyName: NIST
        tables:
          -
            name: _doc
            prettyName: Data
            fields:

  -
    name: EVAL18PART1_REPORT
    datastore: elasticsearchrest
    hostname: 10.107.5.227
    layout: REPORT
    connectOnLoad: true
    databases:
      -
        name: integrity_report_probes_011419
        prettyName: Probes
        tables:
          -
            name: _doc
            prettyName: Data
            fields:
              -
                columnName: Exif.DateTimeOriginal
              -
                columnName: Exif.Model
              -
                columnName: Exif.SizeAndOrientation
      -
        name: integrity_report_operations_011419
        prettyName: Operations
        tables:
          -
            name: _doc
            prettyName: Data
            fields:
              -
                columnName: ProbeFileID
                prettyName: ProbeFileID
              -
                columnName: JournalName
                prettyName: JournalName
              -
                columnName: OperationColor
                prettyName: Color
              -
                columnName: OperationGroup
                prettyName: Operation
              -
                columnName: OperationLabel
                prettyName: Operation and Order
              -
                columnName: OperationOrder
                prettyName: Order
              -
                columnName: OperationPurpose
                prettyName: Purpose
              -
                columnName: OperationScore
                prettyName: Score
              -
                columnName: OperationMaskRequestUrl
                prettyName: Mask
              -
                columnName: DoesHaveMask
                prettyName: Mask?
      -
        name: integrity_report_indicators_011419
        prettyName: Indicators
        tables:
          -
            name: _doc
            prettyName: Data
            fields:
              -
                columnName: DatasetName
                prettyName: Dataset
              -
                columnName: IndicatorName
                prettyName: Indicator
              -
                columnName: IndicatorTask
                prettyName: Task
              -
                columnName: ProbeFileID
                prettyName: ProbeFileID
              -
                columnName: ConfidenceScore
                prettyName: Score
              -
                columnName: ProbeStatus
                prettyName: Status
              -
                columnName: OutputProbeMaskFileName
                prettyName: Mask Name
              -
                columnName: IndicatorMaskPath
                prettyName: Mask Path
              -
                columnName: TargetManipulations
                prettyName: Targeted Manipulations
              -
                columnName: DoesHaveMask
                prettyName: Mask?
      -
        name: integrity_report_donors_011419
        prettyName: Donors
        tables:
          -
            name: _doc
            prettyName: Data
            fields:
    relations:
      -
        members:
          -
            database: integrity_report_probes_011419
            table: _doc
            field: ProbeFileID
          -
            database: integrity_report_operations_011419
            table: _doc
            field: ProbeFileID
          -
            database: integrity_report_indicators_011419
            table: _doc
            field: ProbeFileID
          -
            database: integrity_report_donors_011419
            table: _doc
            field: ProbeFileID
      -
        members:
          -
            database: integrity_report_operations_011419
            table: _doc
            field: OperationGroup
          -
            database: integrity_report_indicators_011419
            table: _doc
            field: TargetManipulations

layouts:
  NIST:
    -
      col: 1
      row: 1
      sizex: 4
      sizey: 12
      type: thumbnailGrid
      bindings:
        title: Probe Image Gallery
        limit: 12
        database: nist_data
        table: _doc
        unsharedFilterField: ProjectType
        unsharedFilterValue: image
        ascending: true
        border: valueCompare
        borderCompareValue: Y
        compareField: IsTarget
        cropAndScale:
        defaultLabel:
        defaultPercent:
        filterField: ProbeFileID
        idField: ProbeFileID
        linkField: ProbeFileName
        #linkField: ProbeThumbnailPath
        linkPrefix: http://10.107.5.227:3000/thumbnail
        #linkPrefix: http://10.107.5.227:8000/mnt/datasets/
        nameField: ProbeFileID
        objectIdField:
        objectNameField: TaskID
        openOnMouseClick: false
        percentField:
        predictedNameField:
        sortField: ProbeFileID
        textMap:
            actual: Task
            percentage:
            prediction:
        typeMap:
            jpeg: img
            arw: img
            bmp: img
            cr2: img
            dng: img
            iiq: img
            jpg: img
            mts: img
            nef: img
            png: img
            raf: img
            tif: img
            3gp: img
            gif: img
            avi: img
            mov: img
            mp4: img

    -
      col: 1
      row: 13
      sizex: 4
      sizey: 5
      type: thumbnailGrid
      bindings:
        title: Probe Video Gallery
        limit: 3
        database: nist_data
        table: _doc
        unsharedFilterField: ProjectType
        unsharedFilterValue: video
        ascending: true
        border: valueCompare
        borderCompareValue: Y
        compareField: IsTarget
        cropAndScale:
        defaultLabel:
        defaultPercent:
        filterField: ProbeFileID
        idField: ProbeFileID
        linkField: ProbeFileName
        #linkField: ProbeThumbnailPath
        linkPrefix: http://10.107.5.227:3000/thumbnail
        #linkPrefix: http://10.107.5.227:8000/mnt/datasets/
        nameField: ProbeFileID
        objectIdField:
        objectNameField: TaskID
        openOnMouseClick: false
        percentField:
        predictedNameField:
        sortField: ProbeFileID
        textMap:
            actual: Task
            percentage:
            prediction:
        typeMap:
            jpeg: img
            arw: img
            bmp: img
            cr2: img
            dng: img
            iiq: img
            jpg: img
            mts: img
            nef: img
            png: img
            raf: img
            tif: img
            3gp: img
            gif: img
            avi: img
            mov: img
            mp4: img

    -
      col: 1
      row: 18
      sizex: 4
      sizey: 4
      type: filterBuilder
      bindings:
        requireAll: true

    -
      col: 5
      row: 1
      sizex: 4
      sizey: 4
      type: aggregation
      bindings:
        type: bar-h
        title: Datasets
        database: nist_data
        table: _doc
        aggregation: count
        logScaleX: true
        sortByAggregation: true
        xField: Dataset
        yPercentage: 0.3

    -
      col: 5
      row: 5
      sizex: 4
      sizey: 4
      type: aggregation
      bindings:
        type: bar-h
        title: Tasks
        database: nist_data
        table: _doc
        aggregation: count
        logScaleX: true
        sortByAggregation: true
        xField: TaskID
        yPercentage: 0.3

    -
      col: 5
      row: 9
      sizex: 4
      sizey: 4
      type: aggregation
      bindings:
        type: bar-h
        title: Is Target
        database: nist_data
        table: _doc
        aggregation: count
        logScaleX: true
        sortByAggregation: true
        xField: IsTarget
        yPercentage: 0.3

    -
      col: 5
      row: 13
      sizex: 4
      sizey: 9
      type: aggregation
      bindings:
        type: bar-h
        title: Manipulations
        database: nist_data
        table: _doc
        aggregation: count
        logScaleX: true
        sortByAggregation: true
        xField: Manipulations
        yPercentage: 0.3

    -
      col: 9
      row: 1
      sizex: 4
      sizey: 7
      type: mediaViewer
      bindings:
        title: Probe
        database: nist_data
        table: _doc
        border: grey
        idField: ProbeFileID
        linkFields:
          - ProbeFileName
        linkPrefix: http://10.107.5.227:3000/image
        #linkPrefix: http://10.107.5.227:8000
        typeMap:
            jpeg: img
            arw:
            bmp: img
            cr2:
            dng:
            iiq:
            jpg: img
            mts:
            nef:
            png: img
            raf:
            tif: img
            3gp:
            gif:
            avi: vid
            mov: vid
            mp4: vid

    -
      col: 9
      row: 8
      sizex: 4
      sizey: 7
      type: mediaViewer
      bindings:
        title: Probe GT Mask
        database: nist_data
        table: _doc
        border: grey
        idField: ProbeFileID
        linkFields:
          - ProbeMaskFileName
        linkPrefix: http://10.107.5.227:3000/image
        #linkPrefix: http://10.107.5.227:8000
        typeMap:
            jpeg: img
            arw:
            bmp: img
            cr2:
            dng:
            iiq:
            jpg: img
            mts:
            nef:
            png: img
            raf:
            tif:
            3gp:
            gif:
            avi: vid
            mov: vid
            mp4: vid

    -
      col: 9
      row: 15
      sizex: 4
      sizey: 7
      type: mediaViewer
      bindings:
        title: Base
        database: nist_data
        table: _doc
        border: grey
        idField: ProbeFileID
        linkFields:
          - BaseFileName
        linkPrefix: http://10.107.5.227:3000/image
        #linkPrefix: http://10.107.5.227:8000
        typeMap:
            jpeg: img
            arw:
            bmp: img
            cr2:
            dng:
            iiq:
            jpg: img
            mts:
            nef:
            png: img
            raf:
            tif:
            3gp:
            gif:
            avi: vid
            mov: vid
            mp4: vid

    -
      col: 1
      row: 22
      sizex: 4
      sizey: 7
      type: mediaViewer
      bindings:
        title: Donor
        database: nist_data
        table: _doc
        border: grey
        idField: ProbeFileID
        linkFields:
          - DonorFileName
        linkPrefix: http://10.107.5.227:3000/image
        #linkPrefix: http://10.107.5.227:8000
        typeMap:
            jpeg: img
            arw:
            bmp: img
            cr2:
            dng:
            iiq:
            jpg: img
            mts:
            nef:
            png: img
            raf:
            tif:
            3gp:
            gif:
            avi: vid
            mov: vid
            mp4: vid

    -
      col: 5
      row: 22
      sizex: 4
      sizey: 7
      type: mediaViewer
      bindings:
        title: Donor GT Mask
        database: nist_data
        table: _doc
        border: grey
        idField: ProbeFileID
        linkFields:
          - DonorMaskFileName
        linkPrefix: http://10.107.5.227:3000/image
        #linkPrefix: http://10.107.5.227:8000
        typeMap:
            jpeg: img
            arw:
            bmp: img
            cr2:
            dng:
            iiq:
            jpg: img
            mts:
            nef:
            png: img
            raf:
            tif:
            3gp:
            gif:
            avi: vid
            mov: vid
            mp4: vid

    -
      col: 9
      row: 22
      sizex: 4
      sizey: 7
      type: mediaViewer
      bindings:
        title: Binary Probe GT Mask
        database: nist_data
        table: _doc
        border: grey
        idField: ProbeFileID
        linkFields:
          - BinaryProbeMaskFileName
        linkPrefix: http://10.107.5.227:3000/image
        #linkPrefix: http://10.107.5.227:8000
        typeMap:
            jpeg: img
            arw:
            bmp: img
            cr2:
            dng:
            iiq:
            jpg: img
            mts:
            nef:
            png: img
            raf:
            tif:
            3gp:
            gif:
            avi: vid
            mov: vid
            mp4: vid

    -
      col: 1
      row: 29
      sizex: 12
      sizey: 6
      type: dataTable
      bindings:
        title: Data
        database: nist_data
        table: _doc
        filterable: true
        filterFields:
          - ProbeFileID
        idField: ProbeFileID
        sortField: ProbeFileID
        skinny: true
        sortDescending: false
        allColumnStatus: hide
        fieldsConfig:
          -
            name: ProbeFileID
          -
            name: Dataset
          -
            name: TaskID
          -
            name: IsTarget
          -
            name: Manipulations
          -
            name: ProbeFileName
          -
            name: ProbeMaskFileName
          -
            name: BaseFileName
          -
            name: DonorFileName
          -
            name: DonorMaskFileName
          -
            name: BinaryProbeMaskFileName
          -
            name: JournalFileName

  REPORT:
    -
      col: 1
      row: 1
      sizex: 3
      sizey: 12
      type: thumbnailGrid
      bindings:
        title: Probes
        limit: 200
        database: 0
        table: _doc
        ascending: true
        border: percentCompare
        borderCompareValue: Manipulated
        compareField: NeonReasoningLabel
        cropAndScale:
        defaultPercent: N/A
        detailedThumbnails: true
        filterField: ProbeFileID
        flagLabel: NeonReasoningTitle
        flagSubLabel1: Exif.DateTimeOriginal
        flagSubLabel2: Exif.Model
        flagSubLabel3: Exif.SizeAndOrientation
        ignoreSelf: true
        linkField: NeonProbePath
        linkPrefix: http://10.107.5.227:3000/thumbnail
        nameField: ProbeFileID
        objectIdField:
        objectNameField:
        openOnMouseClick: false
        percentField: NeonReasoningScore
        predictedNameField:
        sortField: ProbeFileID
        textMap:
            actual: Truth
            percentage: Score
            prediction:
        typeMap:
            jpeg: img
            arw: img
            bmp: img
            cr2: img
            dng: img
            iiq: img
            jpg: img
            mts: img
            nef: img
            png: img
            raf: img
            tif: img
            3gp: img
            gif:
            avi: vid
            mov: vid
            mp4: vid
        viewType: details

    -
      col: 4
      row: 1
      sizex: 3
      sizey: 6
      type: dataTable
      bindings:
        title: Manipulations
        database: 1
        table: _doc
        limit: 100
        colorField: OperationColor
        filterable: true
        filterFields:
          - OperationGroup
        hideUnfiltered: true
        ignoreSelf: true
        singleFilter: true
        skinny: true
        sortDescending: false
        sortField: OperationOrder
        allColumnStatus: hide
        customColumnWidths:
          -
            - OperationScore
            - 50
          -
            - OperationOrder
            - 50
          -
            - OperationColor
            - 50
          -
            - DoesHaveMask
            - 60
        fieldsConfig:
          -
            name: OperationGroup
          -
            name: OperationScore
          -
            name: OperationOrder
          -
            name: OperationColor
          -
            name: OperationPurpose

    -
      col: 4
      row: 7
      sizex: 3
      sizey: 6
      type: dataTable
      bindings:
        title: TA1 Indicators
        database: 2
        table: _doc
        limit: 100
        unsharedFilterField: ProbeStatus
        unsharedFilterValue: Processed
        filterable: true
        filterFields:
          - IndicatorName
        # - TargetManipulations
        heatmapDivisor: 0.2
        heatmapField: ConfidenceScore
        hideUnfiltered: true
        singleFilter: true
        skinny: true
        sortDescending: true
        sortField: ConfidenceScore
        allColumnStatus: hide
        customColumnWidths:
          -
            - ConfidenceScore
            - 100
          -
            - DoesHaveMask
            - 60
        fieldsConfig:
          -
            name: IndicatorName
          -
            name: ConfidenceScore
          -
            name: TargetManipulations

    -
      col: 7
      row: 1
      sizex: 3
      sizey: 6
      type: mediaViewer
      bindings:
        title: Selected Probe
        database: 1
        table: _doc
        unsharedFilterField: DoesHaveMask
        unsharedFilterValue: true
        border: grey
        hideUnfiltered: true
        linkFields:
          - ProbePath
        linkPrefix: http://10.107.5.227:3000/image
        maskField: OperationMaskRequestUrl
        maskLinkPrefix: http://10.107.5.227:3000/masks
        nameField: OperationLabel
        sliderValue: 50
        sortField: OperationOrder
        typeMap:
            jpeg: mask,img
            arw: mask,img
            bmp: mask,img
            cr2: mask,img
            dng: mask,img
            iiq: mask,img
            jpg: mask,img
            mts: mask,img
            nef: mask,img
            png: mask,img
            raf: mask,img
            tif: mask,img
            3gp: mask,img
            gif:
            avi: vid
            mov: vid
            mp4: vid

    -
      col: 7
      row: 7
      sizex: 3
      sizey: 6
      type: mediaViewer
      bindings:
        title: Selected Indicator
        database: 2
        table: _doc
        unsharedFilterField: DoesHaveMask
        unsharedFilterValue: true
        border: grey
        hideUnfiltered: true
        linkFields:
          - ProbePath
        linkPrefix: http://10.107.5.227:3000/image
        maskField: IndicatorMaskPath
        maskLinkPrefix: http://10.107.5.227:3000/image
        nameField: IndicatorName
        sliderValue: 50
        typeMap:
            jpeg: mask,img
            arw: mask,img
            bmp: mask,img
            cr2: mask,img
            dng: mask,img
            iiq: mask,img
            jpg: mask,img
            mts: mask,img
            nef: mask,img
            png: mask,img
            raf: mask,img
            tif: mask,img
            3gp: mask,img
            gif:
            avi: vid
            mov: vid
            mp4: vid

    -
      col: 10
      row: 1
      sizex: 3
      sizey: 6
      type: thumbnailGrid
      bindings:
        title: Donors
        database: 3
        table: _doc
        limit: 100
        hideUnfiltered: true
        ascending: true
        border: percentField
        cropAndScale: scale
        filterField: DonorFileID
        ignoreSelf: true
        linkField: DonorPath
        linkPrefix: http://10.107.5.227:3000/thumbnail
        nameField: DonorFileID
        objectIdField:
        objectNameField:
        openOnMouseClick: false
        percentField: DonorScore
        predictedNameField:
        sortField: DonorFileID
        typeMap:
            jpeg: img
            arw: img
            bmp: img
            cr2: img
            dng: img
            iiq: img
            jpg: img
            mts: img
            nef: img
            png: img
            raf: img
            tif: img
            3gp: img
            gif:
            avi: vid
            mov: vid
            mp4: vid

    -
      col: 10
      row: 7
      sizex: 3
      sizey: 6
      type: mediaViewer
      bindings:
        title: Selected Donor
        database: 3
        table: _doc
        border: grey
        hideUnfiltered: true
        linkFields:
          - DonorPath
        linkPrefix: http://10.107.5.227:3000/image
        maskField: DonorMaskPath
        nameField: DonorFileID
        sliderValue: 50
        sortField: DonorOrder
        typeMap:
            jpeg: mask,img
            arw: mask,img
            bmp: mask,img
            cr2: mask,img
            dng: mask,img
            iiq: mask,img
            jpg: mask,img
            mts: mask,img
            nef: mask,img
            png: mask,img
            raf: mask,img
            tif: mask,img
            3gp: mask,img
            gif:
            avi: vid
            mov: vid
            mp4: vid

