projectIcon: 'assets/custom/favicon.medifor.ico'

datasets:
  -
    name: MFC_2018_EVAL_PART1_REPORT
    datastore: elasticsearchrest
    hostname: 10.107.5.227
    layout: REPORT
    connectOnLoad: true
    databases:
      -
        name: integrity_report_probes_020419
        prettyName: Probes
        tables:
          -
            name: _doc
            prettyName: Data
            fields:
              -
                columnName: DatasetName
                prettyName: Dataset
              -
                columnName: GroundTruthLabel
                prettyName: Ground Truth
              -
                columnName: GroundTruthPercent
                prettyName: Ground Truth Percentage
              -
                columnName: GroundTruthTitle
                prettyName: Ground Truth with Percentage
              -
                columnName: ManipulationOperations
                prettyName: Ground Truth Probe Manipulation Operations
              -
                columnName: NeonDonorIDs
                prettyName: UI Donor IDs
              -
                columnName: NeonDonorPaths
                prettyName: UI Donor Paths
              -
                columnName: NeonDonorMaskPaths
                prettyName: UI Donor Mask Paths
              -
                columnName: NeonMaskCompleteRequestUrl
                prettyName: UI Complete Mask (Request URL)
              -
                columnName: NeonMaskRequestUrlList
                prettyName: UI Masks (Request URLs)
              -
                columnName: NeonProbeMaskPath
                prettyName: UI Probe Mask Path
              -
                columnName: NeonProbePath
                prettyName: UI Probe Path
              -
                columnName: ReasoningAlgorithm
                prettyName: Indicator Fusion Algorithm
              -
                columnName: ReasoningLabel
                prettyName: Indicator Fusion Label
              -
                columnName: ReasoningPercent
                prettyName: Indicator Fusion Percent
              -
                columnName: ReasoningScore
                prettyName: Indicator Fusion Score
              -
                columnName: ReasoningTitle
                prettyName: Indicator Fusion Label and Score
              -
                columnName: Exif.DateTimeOriginal
              -
                columnName: Exif.FileType
              -
                columnName: Exif.Model
              -
                columnName: Exif.SizeAndOrientation

      -
        name: integrity_report_operations_020419
        prettyName: Operations
        tables:
          -
            name: _doc
            prettyName: Data
            fields:
              -
                columnName: DatasetName
                prettyName: Dataset
              -
                columnName: ProbeFileID
                prettyName: ProbeFileID
              -
                columnName: JournalName
                prettyName: JournalName
              -
                columnName: OperationColor
                prettyName: Color
              -
                columnName: OperationGroup
                prettyName: Operation
              -
                columnName: OperationLabel
                prettyName: Operation and Order
              -
                columnName: OperationOrder
                prettyName: Order
              -
                columnName: OperationPurpose
                prettyName: Purpose
              -
                columnName: OperationScore
                prettyName: Score
              -
                columnName: OperationMaskRequestUrl
                prettyName: Mask
              -
                columnName: NeonDataSource
                prettyName: Neon Data Source

      -
        name: integrity_report_indicators_020419
        prettyName: Indicators
        tables:
          -
            name: _doc
            prettyName: Data
            fields:
              -
                columnName: ConfidenceScore
                prettyName: Score (Decimal)
              -
                columnName: DatasetName
                prettyName: Dataset
              -
                columnName: IndicatorCondition
                prettyName: Condition
              -
                columnName: IndicatorID
                prettyName: ID
              -
                columnName: IndicatorMaskPath
                prettyName: Mask Path
              -
                columnName: IndicatorNameDM
                prettyName: Indicator (DM)
              -
                columnName: IndicatorNameNIST
                prettyName: Indicator (NIST)
              -
                columnName: IndicatorNamePretty
                prettyName: Indicator
              -
                columnName: IndicatorPercent
                prettyName: Score (Percent)
              -
                columnName: IndicatorPixelOptOut
                prettyName: Pixel Opt Out
              -
                columnName: IndicatorProbeOptOut
                prettyName: Probe Opt Out
              -
                columnName: IndicatorSubTask
                prettyName: Sub Task
              -
                columnName: IndicatorTask
                prettyName: Task
              -
                columnName: IndicatorTeam
                prettyName: Team
              -
                columnName: IndicatorVersion
                prettyName: Version
              -
                columnName: NeonEval
                prettyName: Neon TPR
              -
                columnName: NeonEvalPercentage
                prettyName: Neon TPR (Percentage)
              -
                columnName: ManipulationOperations
                prettyName: Ground Truth Probe Manipulation Operations
              -
                columnName: NeonID
                prettyName: UI ID
              -
                columnName: OutputProbeMaskFileName
                prettyName: Mask Name
              -
                columnName: ProbeFileID
                prettyName: ProbeFileID
              -
                columnName: ProbeFileName
                prettyName: ProbeFileName
              -
                columnName: ProbePath
                prettyName: ProbePath
              -
                columnName: ProbeStatus
                prettyName: Status
              -
                columnName: SelectiveScoring
                prettyName: Selective Scorings

      -
        name: integrity_report_fusion_020419
        prettyName: Indicator Fusion
        tables:
          -
            name: _doc
            prettyName: Data
            fields:
              -
                columnName: DatasetName
                prettyName: Dataset
              -
                columnName: NeonEval
                prettyName: Neon TPR
              -
                columnName: NeonEvalPercentage
                prettyName: Neon TPR (Percentage)
              -
                columnName: ManipulationOperations
                prettyName: Ground Truth Probe Manipulation Operations
              -
                columnName: NeonProbePath
                prettyName: UI Probe Path
              -
                columnName: ReasoningAlgorithm
                prettyName: Algorithm
              -
                columnName: ReasoningMaskPath
                prettyName: Mask
              -
                columnName: ReasoningPercent
                prettyName: Score (Percent)
              -
                columnName: ReasoningScore
                prettyName: Score (Decimal)

      -
        name: integrity_report_evaluation_020419
        prettyName: NIST Evaluation
        tables:
          -
            name: _doc
            prettyName: Data
            fields:
              -
                columnName: DatasetName
                prettyName: Dataset
              -
                columnName: TaskID
                prettyName: Task
              -
                columnName: IndicatorID
                prettyName: ID
              -
                columnName: IndicatorNameDM
                prettyName: Indicator (DM)
              -
                columnName: IndicatorNameNIST
                prettyName: Indicator (NIST)
              -
                columnName: IndicatorPixelOptOut
                prettyName: Pixel Opt Out
              -
                columnName: IndicatorProbeOptOut
                prettyName: Probe Opt Out
              -
                columnName: ManipulationOperations
                prettyName: Ground Truth Probe Manipulation Operations
              -
                columnName: NeonID
                prettyName: UI ID

      -
        name: integrity_report_donors_020419
        prettyName: Donors
        tables:
          -
            name: _doc
            prettyName: Data
            fields:
              -
                columnName: DatasetName
                prettyName: Dataset

    relations:
      -
        members:
          -
            database: integrity_report_probes_020419
            table: _doc
            field: DatasetName
          -
            database: integrity_report_operations_020419
            table: _doc
            field: DatasetName
          -
            database: integrity_report_indicators_020419
            table: _doc
            field: DatasetName
          -
            database: integrity_report_fusion_020419
            table: _doc
            field: DatasetName
          -
            database: integrity_report_evaluation_020419
            table: _doc
            field: DatasetName
          -
            database: integrity_report_donors_020419
            table: _doc
            field: DatasetName
      -
        members:
          -
            database: integrity_report_probes_020419
            table: _doc
            field: ProbeFileID
          -
            database: integrity_report_operations_020419
            table: _doc
            field: ProbeFileID
          -
            database: integrity_report_indicators_020419
            table: _doc
            field: ProbeFileID
          -
            database: integrity_report_fusion_020419
            table: _doc
            field: ProbeFileID
          -
            database: integrity_report_evaluation_020419
            table: _doc
            field: ProbeFileID
          -
            database: integrity_report_donors_020419
            table: _doc
            field: ProbeFileID
      -
        members:
          -
            database: integrity_report_indicators_020419
            table: _doc
            field: IsTarget
          -
            database: integrity_report_fusion_020419
            table: _doc
            field: IsTarget
          -
            database: integrity_report_evaluation_020419
            table: _doc
            field: IsTarget
      -
        members:
          -
            database: integrity_report_probes_020419
            table: _doc
            field: Exif.*
          -
            database: integrity_report_indicators_020419
            table: _doc
            field: Exif.*
          -
            database: integrity_report_fusion_020419
            table: _doc
            field: Exif.*
          -
            database: integrity_report_evaluation_020419
            table: _doc
            field: Exif.*
      -
        members:
          -
            database: integrity_report_probes_020419
            table: _doc
            field: ManipulationOperations
          -
            database: integrity_report_indicators_020419
            table: _doc
            field: ManipulationOperations
          -
            database: integrity_report_fusion_020419
            table: _doc
            field: ManipulationOperations
          -
            database: integrity_report_evaluation_020419
            table: _doc
            field: ManipulationOperations
      -
        members:
          -
            database: integrity_report_indicators_020419
            table: _doc
            field: IndicatorTask
          -
            database: integrity_report_fusion_020419
            table: _doc
            field: Task
          -
            database: integrity_report_evaluation_020419
            table: _doc
            field: TaskID
      -
        members:
          -
            database: integrity_report_indicators_020419
            table: _doc
            field: IndicatorCondition
          -
            database: integrity_report_evaluation_020419
            table: _doc
            field: IndicatorCondition
      -
        members:
          -
            database: integrity_report_indicators_020419
            table: _doc
            field: IndicatorID
          -
            database: integrity_report_evaluation_020419
            table: _doc
            field: IndicatorID
      -
        members:
          -
            database: integrity_report_indicators_020419
            table: _doc
            field: IndicatorNameDM
          -
            database: integrity_report_evaluation_020419
            table: _doc
            field: IndicatorNameDM
      -
        members:
          -
            database: integrity_report_indicators_020419
            table: _doc
            field: IndicatorNameNIST
          -
            database: integrity_report_evaluation_020419
            table: _doc
            field: IndicatorNameNIST
      -
        members:
          -
            database: integrity_report_indicators_020419
            table: _doc
            field: IndicatorPixelOptOut
          -
            database: integrity_report_evaluation_020419
            table: _doc
            field: IndicatorPixelOptOut
      -
        members:
          -
            database: integrity_report_indicators_020419
            table: _doc
            field: IndicatorProbeOptOut
          -
            database: integrity_report_evaluation_020419
            table: _doc
            field: IndicatorProbeOptOut
      -
        members:
          -
            database: integrity_report_indicators_020419
            table: _doc
            field: IndicatorSubTask
          -
            database: integrity_report_evaluation_020419
            table: _doc
            field: IndicatorSubTask
      -
        members:
          -
            database: integrity_report_indicators_020419
            table: _doc
            field: IndicatorTeam
          -
            database: integrity_report_evaluation_020419
            table: _doc
            field: IndicatorTeam
#      -
#        members:
#          -
#            database: integrity_report_operations_020419
#            table: _doc
#            field: OperationGroup
#          -
#            database: integrity_report_indicators_020419
#            table: _doc
#            field: SelectiveScoring

layouts:
  REPORT:
    Interactive Integrity Report:
        -
          col: 1
          row: 1
          sizex: 3
          sizey: 12
          type: thumbnailGrid
          bindings:
            title: Probes
            limit: 200
            database: 0
            table: _doc
            ascending: true
            border:
            borderCompareValue:
            categoryField: GroundTruthLabel
            compareField: ReasoningLabel
            cropAndScale:
            defaultPercent: N/A
            detailedThumbnails: true
            filterField: ProbeFileID
            #flagPrefix: "Likelihood of Manipulation: "
            flagLabel: ReasoningPercent
            flagSubLabel1: Exif.DateTimeOriginal
            flagSubLabel2: Exif.Model
            flagSubLabel3: Exif.SizeAndOrientation
            ignoreSelf: true
            linkField: NeonProbePath
            linkPrefix: http://10.107.5.227:3000/thumbnail
            #linkPrefix: https://workbench-demo-data.mediforprogram.com/thumbnail
            nameField: ProbeFileID
            objectIdField: ReasoningLabel
            objectNameField:
            openOnMouseClick: false
            percentField:
            predictedNameField:
            sortDescending: true
            sortField: ReasoningScore
            textMap:
                actual: Truth
                percentage: Score
                prediction:
            typeMap:
                jpeg: img
                arw: img
                bmp: img
                cr2: img
                dng: img
                iiq: img
                jpg: img
                mts: img
                nef: img
                png: img
                raf: img
                tif: img
                3gp: img
                gif:
                avi: vid
                mov: vid
                mp4: vid
            viewType: details

        -
          col: 4
          row: 1
          sizex: 3
          sizey: 6
          type: mediaViewer
          bindings:
            title: Overall Manipulation Mask
            limit: 100
            database: 3
            table: _doc
            border: grey
            filter:
              lhs: ReasoningAlgorithm
              operator: '='
              rhs: Random Forest
            hideUnfiltered: true
            linkFields:
              - NeonProbePath
            linkPrefix: http://10.107.5.227:3000/image
            #linkPrefix: https://workbench-demo-data.mediforprogram.com/image
            maskField: ReasoningMaskPath
            maskLinkPrefix: http://10.107.5.227:3000/image
            #maskLinkPrefix: https://workbench-demo-data.mediforprogram.com/image
            nameField: ReasoningAlgorithm
            sliderValue: 50
            sortField: ReasoningAlgorithm
            typeMap:
                jpeg: mask,img
                arw: mask,img
                bmp: mask,img
                cr2: mask,img
                dng: mask,img
                iiq: mask,img
                jpg: mask,img
                mts: mask,img
                nef: mask,img
                png: mask,img
                raf: mask,img
                tif: mask,img
                3gp: mask,img
                gif:
                avi: vid
                mov: vid
                mp4: vid

        -
          col: 4
          row: 7
          sizex: 3
          sizey: 6
          type: dataTable
          bindings:
            title: Indicators
            database: 2
            table: _doc
            limit: 100
            unsharedFilterField: ProbeStatus
            unsharedFilterValue: Processed
            filterable: true
            filterFields:
              - IndicatorNamePretty
            # - SelectiveScoring
            # heatmapDivisor: 0.2
            # heatmapField: ConfidenceScore
            hideUnfiltered: true
            ignoreSelf: true
            singleFilter: true
            skinny: true
            sortDescending: true
            sortField: ConfidenceScore
            allColumnStatus: hide
            customColumnWidths:
              -
                - NeonID
                - 50
              -
                - ConfidenceScore
                - 100
              -
                - IndicatorPercent
                - 100
            fieldsConfig:
              -
                name: NeonID
              -
                name: IndicatorNamePretty
              -
                name: IndicatorPercent
            #  -
            #    name: SelectiveScoring

        -
          col: 7
          row: 1
          sizex: 3
          sizey: 6
          type: dataTable
          bindings:
            title: Manipulations
            database: 1
            table: _doc
            limit: 100
            colorField: OperationColor
            filterable: true
            filterFields:
              - OperationOrder
            hideUnfiltered: true
            ignoreSelf: true
            singleFilter: true
            skinny: true
            sortDescending: false
            sortField: OperationOrder
            allColumnStatus: hide
            customColumnWidths:
              -
                - OperationScore
                - 50
              -
                - OperationOrder
                - 50
              -
                - OperationColor
                - 50
              -
                - OperationPurpose
                - 100
            fieldsConfig:
              -
                name: OperationGroup
              -
                name: OperationOrder
              -
                name: OperationColor
              -
                name: OperationPurpose

        -
          col: 7
          row: 7
          sizex: 3
          sizey: 6
          type: mediaViewer
          bindings:
            title: Indicator Mask
            limit: 100
            database: 2
            table: _doc
            border: grey
            hideUnfiltered: true
            linkFields:
              - ProbePath
            linkPrefix: http://10.107.5.227:3000/image
            #linkPrefix: https://workbench-demo-data.mediforprogram.com/image
            maskField: IndicatorMaskPath
            maskLinkPrefix: http://10.107.5.227:3000/image
            #maskLinkPrefix: https://workbench-demo-data.mediforprogram.com/image
            nameField: NeonID
            sliderValue: 50
            sortField: NeonID
            typeMap:
                jpeg: mask
                arw: mask
                bmp: mask
                cr2: mask
                dng: mask
                iiq: mask
                jpg: mask
                mts: mask
                nef: mask
                png: mask
                raf: mask
                tif: mask
                3gp: mask
                gif:
                avi: vid
                mov: vid
                mp4: vid

        -
          col: 10
          row: 1
          sizex: 3
          sizey: 6
          type: mediaViewer
          bindings:
            title: Manipulation Mask
            limit: 100
            database: 1
            table: _doc
            border: grey
            hideUnfiltered: true
            linkFields:
              - ProbePath
            linkPrefix: http://10.107.5.227:3000/image
            #linkPrefix: https://workbench-demo-data.mediforprogram.com/image
            maskField: OperationMaskRequestUrl
            maskLinkPrefix: http://10.107.5.227:3000/masks
            #maskLinkPrefix: https://workbench-demo-data.mediforprogram.com/masks
            nameField: OperationOrder
            sliderValue: 50
            sortField: OperationOrder
            typeMap:
                jpeg: mask
                arw: mask
                bmp: mask
                cr2: mask
                dng: mask
                iiq: mask
                jpg: mask
                mts: mask
                nef: mask
                png: mask
                raf: mask
                tif: mask
                3gp: mask
                gif:
                avi: vid
                mov: vid
                mp4: vid

        -
          col: 10
          row: 7
          sizex: 3
          sizey: 6
          type: mediaViewer
          bindings:
            title: Selected Donor
            limit: 100
            database: 5
            table: _doc
            border: grey
            hideUnfiltered: true
            linkFields:
              - DonorPath
            linkPrefix: http://10.107.5.227:3000/image
            #linkPrefix: https://workbench-demo-data.mediforprogram.com/image
            maskField: DonorMaskPath
            nameField: DonorOrder
            sliderValue: 50
            sortField: DonorOrder
            typeMap:
                jpeg: mask,img
                arw: mask,img
                bmp: mask,img
                cr2: mask,img
                dng: mask,img
                iiq: mask,img
                jpg: mask,img
                mts: mask,img
                nef: mask,img
                png: mask,img
                raf: mask,img
                tif: mask,img
                3gp: mask,img
                gif:
                avi: vid
                mov: vid
                mp4: vid

    Evaluation Performance Summary:
        -
          col: 1
          row: 1
          sizex: 3
          sizey: 18
          type: thumbnailGrid
          bindings:
            title: Probes
            limit: 200
            database: 0
            table: _doc
            ascending: true
            border:
            borderCompareValue:
            categoryField: GroundTruthLabel
            compareField:
            cropAndScale:
            defaultPercent: N/A
            detailedThumbnails: true
            filterField: ProbeFileID
            flagLabel: GroundTruthLabel
            flagSubLabel1: Exif.DateTimeOriginal
            flagSubLabel2: Exif.Model
            flagSubLabel3: Exif.SizeAndOrientation
            ignoreSelf: true
            linkField: NeonProbePath
            linkPrefix: http://10.107.5.227:3000/thumbnail
            #linkPrefix: https://workbench-demo-data.mediforprogram.com/thumbnail
            nameField: ProbeFileID
            objectIdField: GroundTruthLabel
            objectNameField:
            openOnMouseClick: false
            percentField:
            predictedNameField:
            sortDescending: true
            sortField: ReasoningScore
            textMap:
                actual: Truth
                percentage: Score
                prediction:
            typeMap:
                jpeg: img
                arw: img
                bmp: img
                cr2: img
                dng: img
                iiq: img
                jpg: img
                mts: img
                nef: img
                png: img
                raf: img
                tif: img
                3gp: img
                gif:
                avi: vid
                mov: vid
                mp4: vid
            viewType: details

        -
          col: 4
          row: 1
          sizex: 3
          sizey: 3
          type: aggregation
          bindings:
            type: histogram
            title: File Sizes
            database: 2
            table: _doc
            aggregation: count
            countByAggregation: true
            ignoreSelf: true
            xField: Exif.FileSize
            yPercentage: 0.3

        -
          col: 4
          row: 4
          sizex: 3
          sizey: 3
          type: aggregation
          bindings:
            type: bar-h
            title: File Types
            database: 2
            table: _doc
            aggregation: count
            countByAggregation: true
            ignoreSelf: true
            xField: Exif.FileType
            yPercentage: 0.3

        -
          col: 4
          row: 7
          sizex: 3
          sizey: 3
          type: aggregation
          bindings:
            type: bar-h
            title: Cameras
            database: 2
            table: _doc
            filter:
              lhs: Exif.Model
              operator: '!='
              rhs: '' 
            aggregation: count
            countByAggregation: true
            ignoreSelf: true
            xField: Exif.Model
            yPercentage: 0.3

        -
          col: 4
          row: 10
          sizex: 3
          sizey: 3
          type: aggregation
          bindings:
            type: bar-h
            title: Lens
            database: 2
            table: _doc
            aggregation: count
            countByAggregation: true
            ignoreSelf: true
            xField: Exif.Lens
            yPercentage: 0.3

        -
          col: 4
          row: 13
          sizex: 3
          sizey: 3
          type: aggregation
          bindings:
            type: bar-h
            title: Compression
            database: 2
            table: _doc
            aggregation: count
            countByAggregation: true
            ignoreSelf: true
            xField: Exif.Compression
            yPercentage: 0.3

        -
          col: 4
          row: 16
          sizex: 3
          sizey: 3
          type: aggregation
          bindings:
            type: bar-h
            title: Faces
            database: 2
            table: _doc
            aggregation: count
            countByAggregation: true
            ignoreSelf: true
            xField: Exif.FacesDetected
            yPercentage: 0.3

        -
          col: 7
          row: 1
          sizex: 3
          sizey: 6
          type: aggregation
          bindings:
            type: bar-h
            title: Manipulations
            database: 2
            table: _doc
            filter:
              lhs: ManipulationOperations
              operator: '!='
              rhs: '' 
            aggregation: count
            countByAggregation: true
            ignoreSelf: true
            xField: ManipulationOperations
            yPercentage: 0.3

        -
          col: 7
          row: 7
          sizex: 3
          sizey: 3
          type: aggregation
          bindings:
            type: bar-h
            title: Indicator Teams
            database: 2
            table: _doc
            aggregation: count
            countByAggregation: true
            ignoreSelf: true
            xField: IndicatorTeam
            yPercentage: 0.3

        -
          col: 10
          row: 1
          sizex: 3
          sizey: 9
          type: aggregation
          bindings:
            type: list
            title: Indicator AUC
            database: 2
            table: _doc
            filter:
              lhs: NeonEval
              operator: '!='
              rhs: -1
            aggregation: avg
            aggregationField: NeonEval
            countByAggregation: true
            ignoreSelf: true
            xField: IndicatorNamePretty

        -
          col: 7
          row: 10
          sizex: 6
          sizey: 3
          type: aggregation
          bindings:
            type: histogram
            title: Indicator Score TPR (%)
            limit: 1000
            database: 2
            table: _doc
            filter:
              lhs: NeonEvalPercentage
              operator: '!='
              rhs: -100
            aggregation: count
            countByAggregation: true
            ignoreSelf: true
            xField: NeonEvalPercentage
            yPercentage: 0.3

        -
          col: 7
          row: 13
          sizex: 6
          sizey: 3
          type: aggregation
          bindings:
            type: histogram
            title: Indicator MCCs (%)
            limit: 1000
            database: 4
            table: _doc
            filter:
              lhs: RoundedMCCInt
              operator: '!='
              rhs: -1
            aggregation: count
            countByAggregation: true
            ignoreSelf: true
            xField: RoundedMCCInt
            yPercentage: 0.3
