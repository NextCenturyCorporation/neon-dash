<form class="gear-container" #optionsFOrm="ngForm">

    <mat-form-field class="widgetOption-container">
        <input matInput placeholder="Title" [(ngModel)]="options.title" name="Title" required="false">
    </mat-form-field>
    <p></p>

    <mat-form-field class="widgetOption-container">
        <mat-select placeholder="Database" [(ngModel)]="options.database" required="true" name="database" [disabled]="options.tables.length < 2">
            <mat-option *ngFor="let database of options.databases" [value]="database">{{ database.prettyName }}</mat-option>
        </mat-select>
    </mat-form-field>
    <p></p>

    <mat-form-field class="widgetOption-container">
        <mat-select placeholder="Table" [(ngModel)]="options.table" required="true" name="table" [disabled]="options.tables.length < 2">
            <mat-option *ngFor="let table of options.tables" [value]="table">{{ table.prettyName }}</mat-option>
        </mat-select>
    </mat-form-field>
    <p></p>

    <h4>Required Fields</h4>

    <div class="requiredOption-container" *ngFor="let requiredOption of requiredList">
        <span requiredOption.prettyName class="toggle-text">{{ requiredOption.prettyName }}</span>
        <mat-button-toggle-group class="neon-button-toggle-group-small" *ngIf="checkOptionType(requiredOption.optionType, 'SELECT')">
            <mat-button-toggle class="radio-btn-container" *ngFor="let choice of requiredOption.valueChoices" [checked]="requiredOption.valueCurrent"
                (change)="handleBtnChange(requiredOption, $event )" name="radio-button" [value]="choice.variable">{{ choice.prettyName }}</mat-button-toggle>
        </mat-button-toggle-group>

        <mat-form-field class="widgetOption-container" *ngIf="checkOptionType(requiredOption.optionType, 'FIELD')">
            <mat-select requiredOption.prettyName placeholder={{requiredOption.prettyName}}>
                <mat-option *ngFor="let field of options.fields" [value]="field">{{ field.prettyName }}</mat-option>
            </mat-select>
        </mat-form-field>

        <div mat-fill class="flex center" *ngIf="checkOptionType(requiredOption.optionType, 'FREE_TEXT')">
            <mat-form-field class='widgetOption-container' requiredOption.prettyName>
                <input matInput placeholder={{optionalOption.prettyName}} [(ngModel)]="newLimit" required="false" (keyup.enter)="handleChangeLimit()">
            </mat-form-field>
        </div>
    </div>

    <h4>Optional Fields</h4>

    <div class="requiredOption-container" *ngFor="let optionalOption of optionalList">
        <mat-button-toggle-group class="neon-button-toggle-group-small" *ngIf="checkOptionType(optionalOption.optionType, 'SELECT')">
            <div class="radio-btn-container" *ngFor="let choice of optionalOption.valueChoices" [(ngModel)]="choice.valueCurrent"
                (ngModelChange)="handleBtnChange(choice.valueCurrent)" [ngModelOptions]="{standalone: true}">
                <mat-button-toggle [value]="choice.variable">{{ choice.prettyName }}</mat-button-toggle>
            </div>
        </mat-button-toggle-group>
        <mat-form-field class="widgetOption-container" *ngIf="checkOptionType(optionalOption.optionType, 'FIELD')">
            <mat-select  placeholder={{optionalOption.prettyName}}>
                <mat-option *ngFor="let field of options.fields" [value]="field">{{ field.prettyName }}</mat-option>
            </mat-select>
        </mat-form-field>
        <div mat-fill class="flex center" *ngIf="checkOptionType(optionalOption.optionType, 'FREE_TEXT')">
            <mat-form-field class='widgetOption-container' >
                <input matInput placeholder={{optionalOption.prettyName}} [(ngModel)]="newLimit" required="false" (keyup.enter)="handleChangeLimit()">
            </mat-form-field>
        </div>
    </div>

    <!--<p></p>
    <mat-form-field ngFor="let widget of _collection"> </ngFor>-->

    <app-export-control [widgets]="this"></app-export-control>
</form>
